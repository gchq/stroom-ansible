
- name: 'Check mandatory variables are defined'
  assert:
    that:
      - local_config_dir is defined
      - stroom_proxy_install_root_dir is defined
      - stroom_proxy_version is defined
      - stroom_user is defined

  # We need this so the systemd service knows where java is
  # TODO need to stop it running twice as it gets run in setup/common
- import_role:
    name: setup/java
  tags:
    - deploy
    - install_java

- import_role:
    name: non_docker_proxy/download
  tags:
    - deploy

- import_role:
    name: non_docker_proxy/update_config
  tags:
    - deploy
    - configure

- import_role:
    name: non_docker_proxy/systemd
  tags:
    - deploy

